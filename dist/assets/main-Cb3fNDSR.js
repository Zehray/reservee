var u=(e,t,n)=>new Promise((o,a)=>{var r=c=>{try{d(n.next(c))}catch(f){a(f)}},s=c=>{try{d(n.throw(c))}catch(f){a(f)}},d=c=>c.done?o(c.value):Promise.resolve(c.value).then(r,s);d((n=n.apply(e,t)).next())});import"./main-1wRwdB3J.js";window.URLSearchParams||(window.URLSearchParams=function(e){var t=this;t.params={},e&&e.replace(/^\?/,"").split("&").forEach(function(n){var o=n.split("=");o.length===2&&(t.params[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}),t.append=function(n,o){t.params[n]=o},t.toString=function(){var n=[];for(var o in t.params)n.push(encodeURIComponent(o)+"="+encodeURIComponent(t.params[o]));return n.join("&")}});typeof Object.assign!="function"&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!=null)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t});Array.from||(Array.from=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t});String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e});String.prototype.includes||(String.prototype.includes=function(e,t){return typeof t!="number"&&(t=0),t+e.length>this.length?!1:this.indexOf(e,t)!==-1});typeof Promise=="undefined"&&console.warn("Promise not supported. Please use a Promise polyfill for Safari compatibility.");typeof fetch=="undefined"&&console.warn("Fetch not supported. Please use a fetch polyfill for Safari compatibility.");console.log("‚úÖ Safari polyfills loaded");document.addEventListener("DOMContentLoaded",function(){for(var e=window.location.pathname.split("/").pop()||"index.html",t=document.querySelectorAll(".nav-link"),n=0;n<t.length;n++){var o=t[n];o.classList.remove("active"),o.getAttribute("href")===e&&o.classList.add("active")}});document.addEventListener("click",function(e){var t=e.target.getAttribute("href");if(e.target.tagName==="A"&&t&&t.indexOf("#")===0){e.preventDefault();var n=t.slice(1),o=document.getElementById(n);if(o&&o.scrollIntoView)try{o.scrollIntoView({behavior:"smooth",block:"start"})}catch(a){o.scrollIntoView()}}});document.addEventListener("submit",function(e){var t=e.target.querySelector('button[type="submit"]');if(t){var n=t.textContent||t.innerText;t.textContent="Processing...",t.disabled=!0,setTimeout(function(){t.textContent=n,t.disabled=!1},2e3)}});document.addEventListener("DOMContentLoaded",()=>{h()});let i={},l=[];function h(){return u(this,null,function*(){yield y(),g(),b()})}function y(){return u(this,null,function*(){try{yield v()}catch(e){console.error("Backend failed, trying local files:",e);try{const[t,n]=yield Promise.all([fetch("/iller_ilceler.json"),fetch("src/assets/dummyjson/restaurant.json")]);if(!t.ok||!n.ok)throw new Error("Veri y√ºklenemedi");i=yield t.json(),l=yield n.json(),console.log("‚úÖ Loaded from local files")}catch(t){console.error("Local files failed:",t),m()}}})}function v(){return u(this,null,function*(){try{const e=yield fetch("http://localhost:5000/api/restaurants");e.ok?(l=(yield e.json()).data||[],console.log("‚úÖ Loaded restaurants from backend:",l.length),i={},l.forEach(n=>{const o=n.city||"ƒ∞stanbul",a=n.district||n.location;i[o]||(i[o]=[]),i[o].includes(a)||i[o].push(a)}),console.log("‚úÖ Created city-district mapping:",i)):m()}catch(e){console.error("Backend fallback failed:",e),m()}})}function m(){console.log("Using hardcoded fallback data"),i={ƒ∞stanbul:["Be≈üikta≈ü","Kadƒ±k√∂y","Ortak√∂y"],Ankara:["√áankaya","Ke√ßi√∂ren"],ƒ∞zmir:["Konak","Bornova"]},l=[]}function g(){const e=document.getElementById("citySelect");e.innerHTML='<option value="">≈ûehir se√ßin</option>',Object.keys(i).forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)})}function b(){const e=document.getElementById("citySelect"),t=document.getElementById("districtSelect"),n=document.getElementById("findRestaurants");e.addEventListener("change",w),t.addEventListener("change",E),n.addEventListener("click",B)}function w(){const e=document.getElementById("citySelect"),t=document.getElementById("districtSelect"),n=document.getElementById("findRestaurants"),o=e.value,a=i[o]||[];t.innerHTML='<option value="">ƒ∞l√ße se√ßin</option>',t.disabled=!a.length,n.disabled=!0,a.forEach(r=>{const s=document.createElement("option");s.value=r,s.textContent=r,t.appendChild(s)}),document.getElementById("restaurantResults").classList.add("hidden")}function E(){const e=document.getElementById("districtSelect"),t=document.getElementById("findRestaurants");t.disabled=!e.value}function B(){return u(this,null,function*(){const e=document.getElementById("citySelect").value,t=document.getElementById("districtSelect").value;if(!e||!t)return;try{const o=yield fetch("http://localhost:5000/api/restaurants?city=".concat(encodeURIComponent(e),"&district=").concat(encodeURIComponent(t)));if(o.ok){const a=yield o.json();p(a.data||[],e,t),console.log("‚úÖ Loaded ".concat(a.count," restaurants for ").concat(e,"/").concat(t," from backend"));return}}catch(o){console.warn("‚ö†Ô∏è Backend filter failed, using local data:",o)}const n=l.filter(o=>o.city===e&&o.district===t);p(n,e,t)})}function p(e,t,n){const o=document.getElementById("resultsTitle"),a=document.getElementById("restaurantGrid"),r=document.getElementById("restaurantResults");o.textContent="".concat(n,", ").concat(t," b√∂lgesindeki restoranlar"),a.innerHTML="",e.length===0?a.innerHTML='\n      <div class="no-restaurants">\n        <div class="no-data-icon">üè™</div>\n        <h3>Restoran bulunamadƒ±</h3>\n        <p>Bu b√∂lgede hen√ºz restoran verisi bulunmamaktadƒ±r.</p>\n      </div>':e.forEach(s=>{const d=k(s);a.appendChild(d)}),r.classList.remove("hidden"),r.scrollIntoView({behavior:"smooth"})}function k(e){const t=document.createElement("div");return t.className="restaurant-card",t.innerHTML='\n    <div class="restaurant-image">\n      <img src="'.concat(e.image,'" alt="').concat(e.name,'">\n    </div>\n    <div class="restaurant-content">\n      <h3>').concat(e.name,'</h3>\n      <p class="restaurant-address">').concat(e.district,", ").concat(e.city,'</p>\n      <div class="restaurant-actions">\n        <button class="view-details-btn" onclick="window.location.href=\'restaurant.html?id=').concat(e.id,'\'">\n          Detaylar\n        </button>\n        <button class="quick-reserve-btn" onclick="window.location.href=\'reservation.html?restaurant=').concat(e.id,"'\">\n          Hƒ±zlƒ± Rezervasyon\n        </button>\n      </div>\n    </div>\n  "),t}
